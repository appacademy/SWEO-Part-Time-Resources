# Basic Phase 2: Creating Express Middleware

In this phase, you will create Express middleware and connect them to an
Express application.

## Logger Middleware

Create a middleware function that will log the method and URL path of the
request to the terminal for all requests to the server.

Connect the middleware after the boilerplate code that you added in the previous
phase.

Test the logger middleware by making any request to the server **besides a
static asset route**. You should see the method and URL path of the request in
the terminal.

### Mini-Quiz

Why do you not see the method and URL path logged to the terminal if you make a
request to a static asset route?

### Logging the Status Code of all Server Responses

After testing, in the same middleware function, log the status code of the
response. The middleware function is connected BEFORE the routes. The routes
formulate the response, which also means setting the status codes. So how will
the middleware get the status code of the response when the route handlers,
which set the status code, haven't been called?

The response object has an event listener which can be used to listen for the
event that the response is `finish`ed or sent. To trigger a callback function
that will read and log the status code of the response when the response is
sent, create an event listener for the `finish` event on the response object:

```js
res.on('finish', () => {
  // read and log the status code of the response
});
```

Attach the event listener in the middleware function.

Test the middleware function again. This time, you should see the method and URL
of the request as well as the status code of the response in the terminal.

## Resource Not Found

If none of the server's endpoints match the request's method and URL path, the
server should display an error.

Create a middleware that creates a new error and **throws the error (do not
return a response in the middleware)**. The error should have a property of
`statusCode` with a value of `404`. The error message should be something like
"The requested resource couldn't be found."

Connect the middleware to the Express application in such a way that the
middleware will only be invoked if none of the existing routes match a request's
method and URL path.

To test the middleware, use a client to make a request to an endpoint that is
not generated by the server, like [http://localhost:5000/not-found]. You should
see the error message "The requested resource couldn't be found." in the
terminal.

> Tip: Notice the status codes are different between `GET /test-error` and
> `GET /not-found`.

[http://localhost:5000/not-found]: http://localhost:5000/not-found